{"version":3,"sources":["../../lib/event-handlers/mongoose.js"],"names":[],"mappings":";;AAAA,IAAI,WAAW,QAAQ,UAAR,CAAf;AACA,IAAI,SAAS,QAAQ,QAAR,CAAb;AACA,IAAI,SAAS,QAAQ,aAAR,EAAuB,MAAvB,CAAb;;AAEA,OAAO,OAAP,GAAiB,YAAY;AAC3B,SAAO,IAAP,CAAa,kCAAgC,OAAO,UAAW,GAA/D;AACA,WAAS,OAAT,CAAiB,OAAO,UAAxB;;AAEA,WAAS,UAAT,CAAoB,EAApB,CAAuB,WAAvB,EAAoC,YAAY;AAC9C,WAAO,IAAP,CAAa,wBAAsB,OAAO,UAAW,GAArD;AACD,GAFD;;AAIA,WAAS,UAAT,CAAoB,EAApB,CAAuB,OAAvB,EAAgC,UAAU,GAAV,EAAe;AAC7C,WAAO,IAAP,CAAa,8BAA4B,GAAI,GAA7C;AACD,GAFD;;AAIA,WAAS,UAAT,CAAoB,EAApB,CAAuB,cAAvB,EAAuC,YAAY;AACjD,WAAO,IAAP,CAAY,kCAAZ;AACD,GAFD;;AAIA,UAAQ,EAAR,CAAW,QAAX,EAAqB,YAAY;AAC/B,aAAS,UAAT,CAAoB,KAApB,CAA0B,YAAY;AACpC,aAAO,IAAP,CAAY,gDAAZ;AACA,cAAQ,IAAR,CAAa,CAAb;AACD,KAHD;AAID,GALD;AAMD,CAtBD","file":"mongoose.js","sourcesContent":["var mongoose = require('mongoose')\nvar config = require('config')\nvar logger = require('../util/log')(module)\n\nmodule.exports = function () {\n  logger.info(`Mongoose trying to connect to ${config.mongoDbURI}`)\n  mongoose.connect(config.mongoDbURI)\n\n  mongoose.connection.on('connected', function () {\n    logger.info(`Mongoose connection ${config.mongoDbURI}`)\n  })\n\n  mongoose.connection.on('error', function (err) {\n    logger.info(`Mongoose connection error ${err}`)\n  })\n\n  mongoose.connection.on('disconnected', function () {\n    logger.info('Mongoose connection disconnected')\n  })\n\n  process.on('SIGINT', function () {\n    mongoose.connection.close(function () {\n      logger.info('Mongoose connection disconnected due to SIGINT')\n      process.exit(0)\n    })\n  })\n}\n"]}