{"version":3,"sources":["../../lib/models/environment.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,MAAM,QAAQ,KAAR,CAAV;AACA,IAAI,mBAAmB,QAAQ,qBAAR,CAAvB;AACA,IAAI,cAAc,QAAQ,SAAR,EAAmB,MAArC;AACA,IAAI,YAAY,QAAQ,OAAR,EAAiB,MAAjC;AACA,IAAI,SAAS,IAAI,MAAJ,GAAa,IAAb,CAAkB;AAC7B,MAAI,IAAI,MAAJ,GAAa,QAAb,EADyB;AAE7B,QAAM,IAAI,MAAJ,GAAa,QAAb,EAFuB;AAG7B,YAAU,IAAI,OAAJ,EAHmB;AAI7B,YAAU,IAAI,KAAJ,GAAY,KAAZ,CAAkB,SAAlB,CAJmB;AAK7B,UAAQ,IAAI,KAAJ,GAAY,KAAZ,CAAkB,WAAlB,CALqB;AAM7B,gBAAc,IAAI,MAAJ,GAAa,IAAb,CAAkB;AAC9B,cAAU,IAAI,MAAJ,GAAa,IAAb,CAAkB,CAAC,QAAD,EAAW,OAAX,EAAoB,SAApB,CAAlB,CADoB;AAE9B,eAAW,IAAI,KAAJ,GAAY,KAAZ,CAAkB,IAAI,MAAJ,EAAlB,CAFmB;AAG9B,aAAS,IAAI,KAAJ,GAAY,KAAZ,CAAkB,IAAI,MAAJ,EAAlB;AAHqB,GAAlB,CANe;AAW7B,YAAU,IAAI,KAAJ,GAAY,KAAZ,CACR,IAAI,MAAJ,GAAa,IAAb,CAAkB;AAChB,UAAM,IAAI,MAAJ,GAAa,IAAb,CAAkB,CAAC,QAAD,EAAW,KAAX,CAAlB,CADU;AAEhB,oBAAgB,IAAI,MAAJ,EAFA;AAGhB,cAAU,IAAI,KAAJ,GAAY,IAAZ,CAAiB,MAAjB,EAAyB;AACjC,UAAI,QAD6B;AAEjC,YAAM,IAAI,KAAJ,GAAY,IAAZ,CAAiB,CAAC,cAAD,EAAiB,aAAjB,CAAjB,CAF2B;AAGjC,iBAAW,IAAI,KAAJ,GAAY,IAAZ,CAAiB,CAAC,YAAD,CAAjB;AAHsB,KAAzB;AAHM,GAAlB,CADQ;AAXmB,CAAlB,CAAb;;IAwBM,qB,GAAN,MAAM,qBAAN,SAAoC,gBAApC,CAAqD,E;;;AAGrD,OAAO,OAAP,GAAiB,IAAI,qBAAJ,CAA0B,MAA1B,CAAjB","file":"environment.js","sourcesContent":["'use strict'\n\nvar Joi = require('joi')\nvar SimpleCollection = require('./simple-collection')\nvar droneSchema = require('./drone').schema\nvar jobSchema = require('./job').schema\nvar schema = Joi.object().keys({\n  id: Joi.string().required(),\n  name: Joi.string().required(),\n  isActive: Joi.boolean(),\n  jobQueue: Joi.array().items(jobSchema),\n  drones: Joi.array().items(droneSchema),\n  requirements: Joi.object().keys({\n    platform: Joi.string().only(['darwin', 'linux', 'windows']),\n    languages: Joi.array().items(Joi.string()),\n    plugins: Joi.array().items(Joi.string())\n  }),\n  triggers: Joi.array().items(\n    Joi.object().keys({\n      type: Joi.string().only(['branch', 'tag']),\n      includePattern: Joi.string(),\n      triggers: Joi.array().when('type', {\n        is: 'branch',\n        then: Joi.array().only(['pull-request', 'push-commit']),\n        otherwise: Joi.array().only(['create-tag'])\n      })\n    })\n  )\n})\n\nclass EnvironmentCollection extends SimpleCollection {\n}\n\nmodule.exports = new EnvironmentCollection(schema)\n"]}