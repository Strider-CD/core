{"version":3,"sources":["../../lib/routes/environments.js"],"names":[],"mappings":"AAAA;;;;;;;;AAEA;;;;AACA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,IAAI,WAAW,iBAAO,SAAP,GAAmB,cAAlC;;IAGM,Y,WADL,yBAAI,UAAJ,CAAe,QAAf,C,UAKE,yBAAI,GAAJ,CAAQ,GAAR,C,UASA,yBAAI,IAAJ,CAAS,GAAT,C,2BAbH,MAAM,YAAN,CAAmB;AAKjB,MAAK,OAAL,EAAc,KAAd,EAAqB;AACnB,0BAAY,WAAZ,CAAwB,EAAxB,EAA4B,IAA5B,CAAiC,UAAU,KAAV,EAAiB;AAChD,YAAM,KAAN;AACD,KAFD,EAEG,KAFH,CAES,UAAU,KAAV,EAAiB;AACxB,YAAM,KAAN,EAAa,IAAb,CAAkB,GAAlB;AACD,KAJD;AAKD;;AAGD,SAAQ,OAAR,EAAiB,KAAjB,EAAwB;AACtB,QAAI,UAAU,QAAQ,OAAtB;;AAEA,QAAI,CAAE,QAAQ,IAAd,EAAqB;AACnB,aAAO,MAAM,mBAAN,EAA2B,IAA3B,CAAgC,GAAhC,CAAP;AACD;;AAED,0BAAY,IAAZ,CAAiB,OAAjB,EAA0B,IAA1B,CAA+B,UAAU,EAAV,EAAc;AAC3C,YAAM,EAAN;AACD,KAFD,EAGC,KAHD,CAGQ,KAAD,IAAW,MAAM,KAAN,EAAa,IAAb,CAAkB,GAAlB,CAHlB;AAID;AAzBgB,C;kBA4BJ,Y","file":"environments.js","sourcesContent":["'use strict'\n\nimport config from 'config'\nimport web from 'hapi-decorators'\nimport Environment from '../models/environment'\nvar basePath = config.apiPrefix + 'environments'\n\n@web.controller(basePath)\nclass Environments {\n  /**\n   * Returns all environments\n   */\n  @web.get('/')\n  all (request, reply) {\n    Environment.findByQuery({}).then(function (items) {\n      reply(items)\n    }).catch(function (error) {\n      reply(error).code(400)\n    })\n  }\n\n  @web.post('/')\n  create (request, reply) {\n    var payload = request.payload\n\n    if (!(payload.name)) {\n      return reply('malformed request').code(400)\n    }\n\n    Environment.save(payload).then(function (id) {\n      reply(id)\n    })\n    .catch((error) => reply(error).code(500))\n  }\n}\n\nexport default Environments\n"]}